# 깜박이는 화면 고치기

---

<br>
<br>

# 문제점

---

배경화면을 설정하고, 플레이어가 움직일 우주선 이미지도 만들었다. 하지만, 문제가 발생한다.

지정한 키패드를 이용해 우주선을 움직일 때마다 배경화면이 깜박이는 현상이 나타난다.

무엇이 문제인가?

<br>
<br>

# 원인: 비행기를 찍는 원리

---

`Main DC`는 프로그램에서 아무것도 건드리지 않았을 때, 나타나는 하얀색 배경화면을 의미한다.

비행기와 우리가 만든 검은색 배경화면은 한번 입력을 받아들이고 새로운 정보를 출력할 때마다 창 위의 모든 것들을 지우고, 초기 상태로 되돌린다. 그리고 배경으로 지정한 이미지를 출력하고, 그 위에 새로운 좌표가 입력된 비행기를 출력한다.

문제는 여기에서 나타난다.

`정보 불러오기 --> 입력 받음 --> 초기화 --> 입력에 따른 새로운 위치 출력`

이것이 계속해서 반복되는 것이다.

<br>
<br>

# 해결법

---

두 가지 해결법이 있다:

1. 백버퍼
2. 더블 버퍼링

## 1. 백버퍼

---

> *정의:*
> *`MainDC` 인 `hdc` 뒷편에 `BackDC`를 만들어주는 것*

`BDC`에서 출력할 배경화면을 로딩한다. 그리고, 그 출력한 배경화면을 `MD`로 복사한다.

이렇게 되면 깜박거리는 현상은 모두 보이지 않는 `BDC`에서 발생하기 때문에, 우리가 볼 수 있도록 출력되는 `MD`에서는 깜박거리는 현상이 확인되지 않는다.

`LRESULT CALLBACK WndProc(HWND hWnd, UINT message, WPARAM wParam, LPARAM lParam)`

`C++`로 설명하면, 다음과 같다:

```C++
#include <iostream>
using namespace std;

int main()
{
    int old, my;
    int old2, my2;

    old = 1;
    my = 2;

    cout << my << endl;

    old2 = 1;
    my2 = 3;

    cout << my << endl;

    return 0;
}
```
